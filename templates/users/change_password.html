{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h2 class="text-center">Change Password</h2>
    <form method="POST" action="{{ url_for('change_own_password') }}" class="mt-4">
        <div class="mb-3">
            <label for="current_password" class="form-label">Current Password</label>
            <div style="position: relative;">
                <input type="password" class="form-control" id="current_password" name="current_password" required>
                <i class="fa-solid fa-eye-slash" id="toggleCurrentPassword" style="cursor:pointer; position:absolute; right:10px; top:50%; transform:translateY(-50%); font-size:1.2rem;"></i>
            </div>
        </div>
        <div class="mb-3">
            <label for="new_password" class="form-label">New Password</label>
            <div style="position: relative;">
                <input type="password" class="form-control" id="new_password" name="new_password" required>
                <i class="fa-solid fa-eye-slash" id="toggleNewPassword" style="cursor:pointer; position:absolute; right:10px; top:50%; transform:translateY(-50%); font-size:1.2rem;"></i>
            </div>
            <small class="form-text text-muted">
                Password must meet the following requirements:
                <ul>
                    <li>At least 8 characters long</li>
                    <li>Contain at least one uppercase letter</li>
                    <li>Contain at least one lowercase letter</li>
                    <li>Contain at least one number</li>
                    <li>Contain at least one special character (e.g., @, #, $, etc.)</li>
                </ul>
            </small>
        </div>
        <div class="mb-3">
            <label for="confirm_password" class="form-label">Confirm New Password</label>
            <div style="position: relative;">
                <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
                <i class="fa-solid fa-eye-slash" id="toggleConfirmPassword" style="cursor:pointer; position:absolute; right:10px; top:50%; transform:translateY(-50%); font-size:1.2rem;"></i>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Change Password</button>
    </form>
</div>
<script>
    function setupToggle(inputId, iconId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById(iconId);
        icon.addEventListener('click', function () {
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            }
        });
    }
    setupToggle('current_password', 'toggleCurrentPassword');
    setupToggle('new_password', 'toggleNewPassword');
    setupToggle('confirm_password', 'toggleConfirmPassword');
</script>
{% endblock %}